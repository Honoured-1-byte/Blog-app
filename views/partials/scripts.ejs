<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

<script>
    // THEME TOGGLE LOGIC
    const toggleBtn = document.getElementById('themeToggle');
    const htmlElement = document.documentElement;

    // Helper to update the icon based on current state
    function updateIcon(isLight) {
        // Guard clause if button doesn't exist on this page
        if (!toggleBtn) return;

        const icon = toggleBtn.querySelector('i');
        if (isLight) {
            icon.classList.remove('fa-sun');
            icon.classList.add('fa-moon');
        } else {
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
        }
    }

    // 1. Set initial icon state based on what the <head> script did
    if (htmlElement.classList.contains('light-mode')) {
        updateIcon(true);
    } else {
        updateIcon(false);
    }

    // 2. Toggle on click
    if (toggleBtn) {
        toggleBtn.addEventListener('click', () => {
            if (htmlElement.classList.contains('light-mode')) {
                // Turn Lights OFF (Dark Mode)
                htmlElement.classList.remove('light-mode');
                localStorage.setItem('theme', 'dark');
                updateIcon(false);
            } else {
                // Turn Lights ON (Light Mode)
                htmlElement.classList.add('light-mode');
                localStorage.setItem('theme', 'light');
                updateIcon(true);
            }
        });
    }
</script>

<script>
    // 1. Logic for BLOG COVERS
    function fallbackBlogImage(img, authorId) {
        img.onerror = null; // Prevent infinite loops

        // The specific IDs of your 3 Bots
        const botDefaults = {
            "693dc46dd348ddc001c50af9": "/images/default_ashvashira.jpg", // Ashvashira
            "693dc57bd348ddc001c50b02": "/images/default_yantrik.jpg",    // Yantrik
            "693dc5fcd348ddc001c50b0f": "/images/default_otaku.jpg",      // Otaku
            "6935b54cec77d3663f57f863": "/images/default_sutradhar.jpg",  // Sutradhar
            "6944f46d02303e61a6d0a343": "/images/default_ayur.jpg"        // Ayur
        };

        // If the author is a bot, use their special image. 
        // If it's a human (or unknown), use the generic 'defaultBlog.png'
        img.src = botDefaults[authorId] || "/images/defaultBlog.png";
    }

    // 2. Logic for PROFILE PICTURES
    function fallbackProfileImage(img) {
        img.onerror = null;
        // Always use the generic silhouette for missing profile pics
        img.src = "/images/default_profile.jpeg";
    }
</script>